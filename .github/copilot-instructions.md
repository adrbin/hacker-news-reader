# Copilot Instructions for hacker-news-reader

## Project Overview
- **TypeScript + React + Vite** app for browsing Hacker News via the Algolia API.
- Uses Material UI (MUI) for UI components and theming.
- Progressive Web App (PWA) support via `vite-plugin-pwa`.
- Main data flow: Context API (`PostsContext`) manages posts/comments, fetched from `hnApi.ts`.

## Key Architecture & Patterns
- **Context:**
  - `src/context/PostsContext.tsx` provides posts/comments state and fetch logic.
  - Access context via `usePostsContext` hook (`src/hooks/usePostsContext.ts`).
- **API Layer:**
  - `src/services/hnApi.ts` handles all Hacker News API requests (posts, comments).
- **Pages & Components:**
  - Main pages: `src/pages/HomePage.tsx` (list view), `src/pages/PostDetail.tsx` (detail view).
  - Components in `src/components/` are stateless/presentational where possible.
- **Hooks:**
  - Custom hooks for infinite scroll, debounced fetch, swipe navigation, etc. in `src/hooks/`.
- **State Preservation:**
  - Scroll position and state are preserved between navigation using sessionStorage and context flags.
- **Comment Sorting:**
  - Sorting logic for comments is in `src/utils/comments.ts`.

## Developer Workflows
- **Start dev server:** `npm run dev`
- **Build for production:** `npm run build`
- **Preview production build:** `npm run preview`
- **Lint:** `npm run lint`
- **No built-in test scripts** (add if needed).

## Project Conventions
- **Type safety:** All data from the API is typed (`HNPost`, `HNComment`).
- **Strict linting:** ESLint config in `eslint.config.js`.
- **No Redux:** All state is via React Context/hooks.
- **No direct DOM manipulation** except for scroll restoration.
- **Routing:** Uses `react-router-dom` for navigation.
- **PWA:** Manifest and service worker auto-generated by Vite plugin.

## Integration Points
- **External APIs:**
  - All data comes from Algolia's Hacker News API (`hnApi.ts`).
- **MUI:**
  - Theming and responsive design via MUI hooks/components.
- **PWA:**
  - Configured in `vite.config.ts` and `public/manifest.json`.

## Examples
- To fetch posts: use `searchPosts` from `hnApi.ts` via context.
- To add a new page: create in `src/pages/`, add route in main router (see `main.tsx`).
- To add a new context value: update `PostsContextType` and provider in `PostsContext.tsx`.

---

For more, see `README.md`, `vite.config.ts`, and the `src/` directory structure.
